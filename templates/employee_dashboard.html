{% extends "base.html" %}

{% block title %}Employee: {{ request.user|title }}{% endblock %}

{% block content %}


<h1 class="mt-4">Dashboard</h1>
<ol class="breadcrumb mb-4">
    <li class="breadcrumb-item active">Dashboard</li>
</ol>

{% if  messages %}
    {% for message in messages %}
     <div class="alert alert-{% if message.tags %}{{ message.tags}}{% endif %} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
{% endif %}

<div class="alert alert-info alert-dismissible fade show" role="alert">
  You have {{ last_leave.remaining_days }} days left
</div>

<div class="d-flex align-items-center justify-content-between">
    <h3 class="mb-4 mt-4">My Leaves History</h3>
    <a href="{% url 'create_leave' %}" class="btn btn-primary">Apply for Leave</a>
</div>

<table class="table">
    <thead class="table-light">
        <tr>
            <th>Leave Type</th>
            <th>From</th>
            <th>To</th>
            <th>No of Days</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for leave in leaves %}
        <tr>
            <td>{{ leave.get_leave_type_display }}</td>
            <td>{{ leave.start_date }}</td>
            <td>{{ leave.end_date }}</td>
            <td>{{ leave.leave_days }} days</td>
            <td>{{ leave.get_status_display }}</td>
            <td><a href="{% url 'leave_detail' leave.pk %}">View</a></td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6">You have yet to apply for a Leave.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}